<!-- livebook:{"app_settings":{"slug":"metrics"}} -->

# Website Metrics

```elixir
Mix.install([
  {:kino, "~> 0.12.0"}
])
```

## Metrics

A very simple display of the site metrics!

<!-- livebook:{"attrs":"eyJhc3NpZ25fdG8iOiIiLCJjb2RlIjoibWV0cmljcyA9IFNhbXVlbFdpbGxpcy5SZXBvLmFsbChTYW11ZWxXaWxsaXMuTWV0cmljcy5NZXRyaWMpXG5cbkVudW0ubWFwKG1ldHJpY3MsICYgeyYxLmRhdGUsICYxLnBhdGgsICYxLnZpc2l0c30pIiwiY29va2llIjoiIiwiY29va2llX3NlY3JldCI6IldFQlNJVEVfUkVMRUFTRV9DT09LSUUiLCJub2RlIjoic2FtdWVsd2lsbGlzZGV2QGZkYWE6MTo1MjE6YTdiOjg4ZGM6NTkwMjozZjlmOjIiLCJub2RlX3NlY3JldCI6IldFQlNJVEVfUkVMRUFTRV9OT0RFIiwibm9kZV9zZWNyZXRfdmFsdWUiOm51bGwsInVzZV9jb29raWVfc2VjcmV0Ijp0cnVlLCJ1c2Vfbm9kZV9zZWNyZXQiOnRydWV9","chunks":null,"kind":"Elixir.Kino.RemoteExecutionCell","livebook_object":"smart_cell"} -->

```elixir
require Kino.RPC
node = String.to_atom(System.fetch_env!("LB_WEBSITE_RELEASE_NODE"))
Node.set_cookie(node, String.to_atom(System.fetch_env!("LB_WEBSITE_RELEASE_COOKIE")))

Kino.RPC.eval_string(
  node,
  ~S"""
  metrics = SamuelWillis.Repo.all(SamuelWillis.Metrics.Metric)

  Enum.map(metrics, & {&1.date, &1.path, &1.visits})
  """,
  file: __ENV__.file
)
```

<!-- livebook:{"offset":1154,"stamp":{"token":"XCP.kf9QrO5Zgl53BwwDYQGpnipdDkbnPkDSFLz00J7f4vXielEhmNsQz62yo1njNzGpQK6N0wa74HXym6svqx23svQdDvmG_TXBDmxFIHyw1gQBewVQC2dXQ5pfLofaFtXzPDCSetBk7-SX-xFxyTcwQJis1bdvaHLt36pHa0viMGTy6ZxLubSQjbOZV7dnugXp","version":2}} -->
